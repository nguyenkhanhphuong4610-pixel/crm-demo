<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Spa CRM ‚Äì Demo ho√†n ch·ªânh</title>

<style>
body{font-family:Arial;background:#f2f4f7;margin:0;padding:20px}
.container{max-width:1200px;margin:auto}
h1,h2{color:#e91e63}
.card{background:#fff;padding:16px;border-radius:10px;margin-bottom:16px}
input,select,textarea,button{
  width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ccc
}
button{background:#e91e63;color:#fff;border:none;cursor:pointer}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#fde4ec}
.hidden{display:none}
a{color:#e91e63;cursor:pointer;text-decoration:none}
.badge{padding:4px 8px;border-radius:6px;color:#fff;font-size:12px}
.doing{background:#ff9800}
.done{background:#4caf50}
.flex{display:flex;gap:10px;flex-wrap:wrap}
img{max-width:45%;border-radius:6px;border:1px solid #ddd}
</style>
</head>

<body>
<div class="container">

<!-- ===== PAGE: LIST ===== -->
<div id="pageList">
<h1>üå∏ Qu·∫£n l√Ω kh√°ch h√†ng Spa</h1>

<div class="card">
<input id="search" placeholder="üîç T√¨m theo t√™n ho·∫∑c SƒêT" oninput="renderList()">
</div>

<div class="card">
<h3>‚ûï Th√™m kh√°ch h√†ng</h3>
<input id="customerName" placeholder="T√™n kh√°ch">
<input id="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
<input id="birthday" type="date">
<input id="service" placeholder="D·ªãch v·ª•">
<input id="price" type="number" placeholder="Gi√° d·ªãch v·ª•">
<input id="consultant" placeholder="NV t∆∞ v·∫•n">
<input id="staff" placeholder="NV chƒÉm s√≥c">
<input id="nextDate" type="date">
<select id="status">
  <option value="doing">ƒêang l√†m</option>
  <option value="done">ƒê√£ xong</option>
</select>
<textarea id="roadmap" placeholder="L·ªô tr√¨nh (m·ªói d√≤ng l√† 1 b∆∞·ªõc)"></textarea>
<input id="beforeImg" placeholder="Link ·∫£nh Before">
<input id="afterImg" placeholder="Link ·∫£nh After">

<button onclick="addCustomer()">L∆∞u kh√°ch h√†ng</button>
</div>

<div class="card">
<table>
<thead>
<tr>
<th>T√™n</th><th>SƒêT</th><th>D·ªãch v·ª•</th><th>Tr·∫°ng th√°i</th><th>H·ªì s∆°</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</div>
</div>

<!-- ===== PAGE: DETAIL ===== -->
<div id="pageDetail" class="hidden">
<a onclick="goHome()">‚Üê Quay l·∫°i</a>
<div class="card" id="detail"></div>
</div>

</div>

<script>
let customers = JSON.parse(localStorage.getItem("spaCRM")) || [];

function save(){
  localStorage.setItem("spaCRM",JSON.stringify(customers));
}

function addCustomer(){
  if(!customerName.value||!phone.value){
    alert("Thi·∫øu t√™n ho·∫∑c SƒêT"); return;
  }
  customers.push({
    id:Date.now(),
    name:customerName.value,
    phone:phone.value,
    birthday:birthday.value,
    service:service.value,
    price:price.value,
    consultant:consultant.value,
    staff:staff.value,
    nextDate:nextDate.value,
    status:status.value,
    roadmap:roadmap.value.split("\n"),
    beforeImg:beforeImg.value,
    afterImg:afterImg.value
  });
  save();
  clearForm();
  renderList();
}

function clearForm(){
  document.querySelectorAll("input,textarea").forEach(i=>i.value="");
}

function renderList(){
  const key = search.value.toLowerCase();
  list.innerHTML="";
  customers
    .filter(c=>c.name.toLowerCase().includes(key)||c.phone.includes(key))
    .forEach(c=>{
      list.innerHTML+=`
      <tr>
        <td>${c.name}</td>
        <td>${c.phone}</td>
        <td>${c.service}</td>
        <td><span class="badge ${c.status}">
          ${c.status==="doing"?"ƒêang l√†m":"Ho√†n th√†nh"}
        </span></td>
        <td><a onclick="openCustomer(${c.id})">M·ªü</a></td>
      </tr>`;
    });
}

function openCustomer(id){
  location.hash="customer-"+id;
}

function goHome(){
  location.hash="";
}

function renderDetail(id){
  const c = customers.find(x=>x.id==id);
  if(!c) return;
  detail.innerHTML=`
    <h2>${c.name}</h2>
    <p><b>SƒêT:</b> ${c.phone}</p>
    <p><b>Sinh nh·∫≠t:</b> ${c.birthday||"-"}</p>
    <p><b>D·ªãch v·ª•:</b> ${c.service}</p>
    <p><b>Gi√°:</b> ${c.price}ƒë</p>
    <p><b>NV t∆∞ v·∫•n:</b> ${c.consultant}</p>
    <p><b>NV chƒÉm s√≥c:</b> ${c.staff}</p>
    <p><b>Ng√†y h·∫πn ti·∫øp:</b> ${c.nextDate}</p>

    <h3>L·ªô tr√¨nh</h3>
    <ul>${c.roadmap.map(r=>`<li>${r}</li>`).join("")}</ul>

    <h3>Before / After</h3>
    <div class="flex">
      ${c.beforeImg?`<img src="${c.beforeImg}">`:""}
      ${c.afterImg?`<img src="${c.afterImg}">`:""}
    </div>
  `;
}

function router(){
  if(location.hash.startsWith("#customer-")){
    pageList.classList.add("hidden");
    pageDetail.classList.remove("hidden");
    renderDetail(location.hash.replace("#customer-",""));
  } else {
    pageDetail.classList.add("hidden");
    pageList.classList.remove("hidden");
    renderList();
  }
}

window.addEventListener("hashchange",router);
router();
</script>

</body>
</html>