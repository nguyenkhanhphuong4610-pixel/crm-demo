<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Spa CRM ‚Äì Showcase</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.container{max-width:1100px;margin:auto}
h1{text-align:center;color:#e91e63}
.card{background:#fff;padding:15px;border-radius:10px;margin-bottom:20px}
input,select,textarea,button{width:100%;padding:8px;margin-top:6px}
button{background:#e91e63;color:#fff;border:none;border-radius:6px;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center;font-size:14px}
th{background:#fde4ec}
textarea{height:70px}
.badge{padding:4px 8px;border-radius:5px;color:#fff;font-size:12px}
.doing{background:#ff9800}
.done{background:#4caf50}
</style>
</head>

<body>
<div class="container">
<h1>üå∏ Spa Customer Management ‚Äì Demo</h1>

<div class="card">
<h3>Th√™m / S·ª≠a kh√°ch h√†ng</h3>
<input id="name" placeholder="T√™n kh√°ch h√†ng">
<input id="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
<input type="date" id="birthday">
<input id="service" placeholder="D·ªãch v·ª• s·ª≠ d·ª•ng">
<input type="number" id="price" placeholder="Gi√° d·ªãch v·ª• (VNƒê)">
<input id="consultant" placeholder="Nh√¢n vi√™n t∆∞ v·∫•n">
<input id="staff" placeholder="Nh√¢n vi√™n chƒÉm s√≥c">

<select id="status">
<option value="doing">ƒêang trong ti·∫øn tr√¨nh</option>
<option value="done">ƒê√£ ho√†n th√†nh</option>
</select>

<textarea id="roadmap" placeholder="L·ªô tr√¨nh chƒÉm s√≥c (m·ªói d√≤ng l√† 1 bu·ªïi)"></textarea>

<button onclick="saveCustomer()">L∆∞u kh√°ch h√†ng</button>
</div>

<div class="card">
<h3>Danh s√°ch kh√°ch h√†ng</h3>
<table>
<thead>
<tr>
<th>T√™n</th>
<th>SƒêT</th>
<th>D·ªãch v·ª•</th>
<th>Gi√°</th>
<th>Tr·∫°ng th√°i</th>
<th>Chi ti·∫øt</th>
<th>S·ª≠a</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</div>

<div class="card" id="detailBox" style="display:none">
<h3>Chi ti·∫øt kh√°ch h√†ng</h3>
<div id="detail"></div>
</div>
</div>

<script>
let customers = JSON.parse(localStorage.getItem("spaCRM")) || [];
let editingId = null;

function saveCustomer(){
  const data = {
    id: editingId || Date.now(),
    name: name.value,
    phone: phone.value,
    birthday: birthday.value,
    service: service.value,
    price: price.value,
    consultant: consultant.value,
    staff: staff.value,
    status: status.value,
    roadmap: roadmap.value.split("\n")
  };

  if(!data.name || !data.phone){
    alert("Nh·∫≠p t·ªëi thi·ªÉu t√™n v√† SƒêT");
    return;
  }

  if(editingId){
    customers = customers.map(c=>c.id===editingId?data:c);
    editingId = null;
  } else {
    customers.push(data);
  }

  localStorage.setItem("spaCRM", JSON.stringify(customers));
  clearForm();
  render();
}

function render(){
  list.innerHTML="";
  customers.forEach(c=>{
    list.innerHTML+=`
    <tr>
      <td>${c.name}</td>
      <td>${c.phone}</td>
      <td>${c.service}</td>
      <td>${Number(c.price).toLocaleString()}ƒë</td>
      <td><span class="badge ${c.status}">${c.status==="doing"?"ƒêang l√†m":"Ho√†n th√†nh"}</span></td>
      <td><button onclick="viewDetail(${c.id})">Xem</button></td>
      <td><button onclick="editCustomer(${c.id})">S·ª≠a</button></td>
    </tr>`;
  });
}

function viewDetail(id){
  const c = customers.find(x=>x.id===id);
  detail.innerHTML=`
  <p><b>T√™n:</b> ${c.name}</p>
  <p><b>SƒêT:</b> ${c.phone}</p>
  <p><b>Sinh nh·∫≠t:</b> ${c.birthday||"‚Äî"}</p>
  <p><b>D·ªãch v·ª•:</b> ${c.service}</p>
  <p><b>Gi√°:</b> ${Number(c.price).toLocaleString()}ƒë</p>
  <p><b>NV t∆∞ v·∫•n:</b> ${c.consultant}</p>
  <p><b>NV chƒÉm s√≥c:</b> ${c.staff}</p>
  <p><b>L·ªô tr√¨nh:</b></p>
  <ul>${c.roadmap.map(r=>`<li>${r}</li>`).join("")}</ul>`;
  detailBox.style.display="block";
}

function editCustomer(id){
  const c = customers.find(x=>x.id===id);
  editingId=id;
  name.value=c.name;
  phone.value=c.phone;
  birthday.value=c.birthday;
  service.value=c.service;
  price.value=c.price;
  consultant.value=c.consultant;
  staff.value=c.staff;
  status.value=c.status;
  roadmap.value=c.roadmap.join("\n");
  window.scrollTo(0,0);
}

function clearForm(){
  name.value=phone.value=birthday.value=service.value=price.value=consultant.value=staff.value=roadmap.value="";
  status.value="doing";
}

render();
</script>
</body>
</html>