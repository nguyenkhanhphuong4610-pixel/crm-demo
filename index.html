<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Spa CRM â€“ Full Demo</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.container{max-width:1200px;margin:auto}
h1{text-align:center;color:#e91e63}
.card{background:#fff;padding:15px;border-radius:10px;margin-bottom:20px}
input,select,textarea,button{width:100%;padding:8px;margin-top:6px}
button{background:#e91e63;color:#fff;border:none;border-radius:6px;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center;font-size:14px}
th{background:#fde4ec}
textarea{height:70px}
.badge{padding:4px 8px;border-radius:5px;color:#fff;font-size:12px}
.doing{background:#ff9800}
.done{background:#4caf50}
.alert{background:#fff3cd;padding:10px;border-radius:6px;margin-bottom:15px}
</style>
</head>

<body>
<div class="container">
<h1>ğŸŒ¸ Spa Customer Management â€“ Showcase</h1>

<div id="birthdayAlert"></div>

<div class="card">
<h3>ThÃªm / Sá»­a khÃ¡ch hÃ ng</h3>
<input id="name" placeholder="TÃªn khÃ¡ch hÃ ng">
<input id="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i">
<input type="date" id="birthday">
<input id="service" placeholder="Dá»‹ch vá»¥ sá»­ dá»¥ng">
<input type="number" id="price" placeholder="GiÃ¡ dá»‹ch vá»¥ (VNÄ)">
<input id="consultant" placeholder="NhÃ¢n viÃªn tÆ° váº¥n">
<input id="staff" placeholder="NhÃ¢n viÃªn chÄƒm sÃ³c">
<input type="date" id="nextDate">

<select id="status">
<option value="doing">Äang trong tiáº¿n trÃ¬nh</option>
<option value="done">ÄÃ£ hoÃ n thÃ nh</option>
</select>

<textarea id="roadmap" placeholder="Lá»™ trÃ¬nh (má»—i dÃ²ng = 1 buá»•i)"></textarea>

<button onclick="saveCustomer()">LÆ°u khÃ¡ch hÃ ng</button>
</div>

<div class="card">
<h3>ğŸ“Š Thá»‘ng kÃª nhanh</h3>
<p><b>Tá»•ng khÃ¡ch:</b> <span id="totalCus">0</span></p>
<p><b>Tá»•ng doanh thu:</b> <span id="totalMoney">0</span> Ä‘</p>
</div>

<div class="card">
<h3>Danh sÃ¡ch khÃ¡ch hÃ ng</h3>
<table>
<thead>
<tr>
<th>TÃªn</th>
<th>SÄT</th>
<th>Dá»‹ch vá»¥</th>
<th>GiÃ¡</th>
<th>Tráº¡ng thÃ¡i</th>
<th>Háº¹n tiáº¿p</th>
<th>Chi tiáº¿t</th>
<th>Sá»­a</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</div>

<div class="card" id="detailBox" style="display:none">
<h3>Chi tiáº¿t khÃ¡ch hÃ ng</h3>
<div id="detail"></div>
</div>
</div>

<script>
let customers = JSON.parse(localStorage.getItem("spaCRM")) || [];
let editingId = null;

function saveCustomer(){
  const data = {
    id: editingId || Date.now(),
    name:name.value, phone:phone.value, birthday:birthday.value,
    service:service.value, price:+price.value,
    consultant:consultant.value, staff:staff.value,
    status:status.value, nextDate:nextDate.value,
    roadmap:roadmap.value.split("\n")
  };
  if(!data.name||!data.phone){alert("Nháº­p tÃªn vÃ  SÄT");return;}
  editingId ? customers=customers.map(c=>c.id===editingId?data:c) : customers.push(data);
  editingId=null;
  localStorage.setItem("spaCRM",JSON.stringify(customers));
  clearForm(); render();
}

function render(){
  list.innerHTML="";
  let money=0;
  customers.forEach(c=>{
    money+=c.price||0;
    list.innerHTML+=`
    <tr>
      <td>${c.name}</td>
      <td>${c.phone}</td>
      <td>${c.service}</td>
      <td>${(c.price||0).toLocaleString()}Ä‘</td>
      <td><span class="badge ${c.status}">${c.status=="doing"?"Äang lÃ m":"Xong"}</span></td>
      <td>${c.nextDate||"-"}</td>
      <td><button onclick="viewDetail(${c.id})">Xem</button></td>
      <td><button onclick="editCustomer(${c.id})">Sá»­a</button></td>
    </tr>`;
  });
  totalCus.innerText=customers.length;
  totalMoney.innerText=money.toLocaleString();
  birthdayCheck();
}

function viewDetail(id){
  const c=customers.find(x=>x.id===id);
  detail.innerHTML=`
  <p><b>TÃªn:</b> ${c.name}</p>
  <p><b>SÄT:</b> ${c.phone}</p>
  <p><b>Sinh nháº­t:</b> ${c.birthday||"-"}</p>
  <p><b>NV tÆ° váº¥n:</b> ${c.consultant}</p>
  <p><b>NV chÄƒm sÃ³c:</b> ${c.staff}</p>
  <p><b>Lá»™ trÃ¬nh:</b></p>
  <ul>${c.roadmap.map(r=>`<li>${r}</li>`).join("")}</ul>`;
  detailBox.style.display="block";
}

function editCustomer(id){
  const c=customers.find(x=>x.id===id);
  editingId=id;
  Object.assign(window,{
    name:{value:c.name}, phone:{value:c.phone}, birthday:{value:c.birthday},
    service:{value:c.service}, price:{value:c.price},
    consultant:{value:c.consultant}, staff:{value:c.staff},
    status:{value:c.status}, nextDate:{value:c.nextDate},
    roadmap:{value:c.roadmap.join("\n")}
  });
  window.scrollTo(0,0);
}

function clearForm(){
  name.value=phone.value=birthday.value=service.value=price.value=
  consultant.value=staff.value=roadmap.value=nextDate.value="";
  status.value="doing";
}

function birthdayCheck(){
  const today=new Date().toISOString().slice(5,10);
  const listBD=customers.filter(c=>c.birthday?.slice(5,10)===today);
  birthdayAlert.innerHTML=listBD.length?
    `<div class="alert">ğŸ‚ HÃ´m nay sinh nháº­t: ${listBD.map(c=>c.name).join(", ")}</div>`:"";
}

render();
</script>
</body>
</html>